<div class="profile-page">
  <div class="container">
    <!-- Header -->
    <div class="page-header">
      <h1><i class="fas fa-user"></i> Thông tin cá nhân</h1>
      <p>Xem và quản lý thông tin tài khoản của bạn</p>
    </div>

    <!-- Loading -->
    <div *ngIf="isLoading" class="loading-container">
      <div class="loading-spinner">
        <i class="fas fa-spinner fa-spin"></i>
        <span>Đang tải thông tin...</span>
      </div>
    </div>

    <!-- Profile Content -->
    <div *ngIf="!isLoading && user" class="profile-content">
      <div class="profile-grid">
        
        <!-- Avatar Section -->
        <div class="profile-card avatar-card">
          <div class="card-header">
            <h3><i class="fas fa-camera"></i> Ảnh đại diện</h3>
          </div>
          <div class="card-body">
            <div class="avatar-section">
              <div class="avatar-container">
                <div class="avatar-large" *ngIf="avatarUrl; else defaultAvatar">
                  <img [src]="avatarUrl" [alt]="user.firstName" />
                </div>
                <ng-template #defaultAvatar>
                  <div class="user-initial-large">
                    {{ user.firstName.charAt(0) || user.username.charAt(0) || 'U' }}
                  </div>
                </ng-template>
              </div>
              <div class="avatar-actions">
                <button class="btn btn-primary">
                  <i class="fas fa-upload"></i> Thay đổi ảnh
                </button>
                <button class="btn btn-outline" *ngIf="avatarUrl">
                  <i class="fas fa-trash"></i> Xóa ảnh
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Personal Information -->
        <div class="profile-card personal-info-card">
          <div class="card-header">
            <h3><i class="fas fa-info-circle"></i> Thông tin cá nhân</h3>
            <button class="btn btn-outline btn-sm">
              <i class="fas fa-edit"></i> Chỉnh sửa
            </button>
          </div>
          <div class="card-body">
            <div class="info-grid">
              <div class="info-item">
                <label>Tên đăng nhập</label>
                <span class="value">{{ user.username }}</span>
              </div>
              <div class="info-item">
                <label>Họ</label>
                <span class="value">{{ user.lastName || 'Chưa cập nhật' }}</span>
              </div>
              <div class="info-item">
                <label>Tên</label>
                <span class="value">{{ user.firstName || 'Chưa cập nhật' }}</span>
              </div>
              <div class="info-item">
                <label>Email</label>
                <span class="value">{{ user.email || 'Chưa cập nhật' }}</span>
                <span class="verification-status" *ngIf="user.verifyEmail">
                  <i class="fas fa-check-circle text-success"></i> Đã xác thực
                </span>
                <span class="verification-status" *ngIf="!user.verifyEmail">
                  <i class="fas fa-exclamation-circle text-warning"></i> Chưa xác thực
                </span>
              </div>
              <div class="info-item">
                <label>Số điện thoại</label>
                <span class="value">Chưa cập nhật</span>
              </div>
              <div class="info-item">
                <label>Địa chỉ</label>
                <span class="value">Chưa cập nhật</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Account Status -->
        <div class="profile-card status-card">
          <div class="card-header">
            <h3><i class="fas fa-shield-alt"></i> Trạng thái tài khoản</h3>
          </div>
          <div class="card-body">
            <div class="status-info">
              <div class="status-badge" [class]="getStatusBadgeClass(user.status)">
                <i class="fas fa-circle"></i>
                <span>{{ getStatusText(user.status) }}</span>
              </div>
              <div class="status-details">
                <div class="detail-item">
                  <i class="fas fa-calendar-alt"></i>
                  <span>Tài khoản đã được xác thực: <strong>{{ user.verifyEmail ? 'Có' : 'Chưa' }}</strong></span>
                </div>
                <div class="detail-item">
                  <i class="fas fa-shield-alt"></i>
                  <span>Mã người dùng: <strong>#{{ user.id }}</strong></span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Security Settings -->
        <div class="profile-card security-card">
          <div class="card-header">
            <h3><i class="fas fa-lock"></i> Bảo mật</h3>
          </div>
          <div class="card-body">
            <div class="security-actions">
              <button class="btn btn-primary btn-block">
                <i class="fas fa-key"></i> Đổi mật khẩu
              </button>
              <button class="btn btn-outline btn-block">
                <i class="fas fa-shield-alt"></i> Xác thực 2 lớp
              </button>
              <button class="btn btn-outline btn-block">
                <i class="fas fa-history"></i> Lịch sử đăng nhập
              </button>
            </div>
          </div>
        </div>

        <!-- Account Actions -->
        <div class="profile-card actions-card">
          <div class="card-header">
            <h3><i class="fas fa-cog"></i> Thao tác tài khoản</h3>
          </div>
          <div class="card-body">
            <div class="action-buttons">
              <button class="btn btn-success btn-block">
                <i class="fas fa-download"></i> Tải dữ liệu cá nhân
              </button>
              <button class="btn btn-outline btn-block">
                <i class="fas fa-user-slash"></i> Vô hiệu hóa tài khoản
              </button>
              <button class="btn btn-danger btn-block">
                <i class="fas fa-trash-alt"></i> Xóa tài khoản vĩnh viễn
              </button>
            </div>
          </div>
        </div>

      </div>
    </div>

    <!-- Error State -->
    <div *ngIf="!isLoading && !user" class="error-state">
      <div class="error-content">
        <i class="fas fa-exclamation-triangle"></i>
        <h3>Không thể tải thông tin</h3>
        <p>Có lỗi xảy ra khi tải thông tin tài khoản. Vui lòng thử lại.</p>
        <button class="btn btn-primary" (click)="loadUserProfile()">
          <i class="fas fa-refresh"></i> Thử lại
        </button>
      </div>
    </div>

  </div>
</div>